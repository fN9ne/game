function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),$(document).ready((function(){let e=$(".burger-menu__button"),t=$(".main-menu");function a(){$(".menu").removeClass("active"),e.removeClass("active"),e.removeClass("arrow")}e.click((function(){e.hasClass("active")?e.hasClass("arrow")?(e.removeClass("arrow"),$(".menu").removeClass("active"),t.addClass("active")):a():(e.addClass("active"),t.addClass("active"))})),$(".tab").click((function(){let l=$(this).attr("data-link");if(void 0===l);else{t.removeClass("active");for(let e=0;e<$(".menu").length;e++){let t=l+"-menu";$(".menu").eq(e).hasClass(t)&&$("."+t).addClass("active")}$(".sub-menu.active").length>0?e.addClass("arrow"):e.removeClass("arrow")}0===$(".menu.active").length&&a()}));let l,o,n,i,d,c,m=$(".shop-menu__tab");function s(){75==b("dpc")&&m.eq(1).removeClass("hide"),135==b("dpc")&&m.eq(2).removeClass("hide"),185==b("dpc")&&m.eq(2).removeClass("hide")}m.each((function(e){$(this).attr("data-num",e)})),s(),-1==b("money")?l=0:(l=+b("money"),$("#money").html(l)),o=-1==b("dpc")?1:+b("dpc"),$("#dpc").html(o),$(".dpc").click((function(){let e=+$(this).find("span[id=dpcCost]").text(),t=+$(this).find("span[id=dpcBuff]").text();l<e?alert("Не хватает денег"):(o+=t,l-=e,$("#dpc").html(o),A("dpc",o),$("#money").html(l),A("money",l),d=i/n*o,s())}));let h=$(".enemy");c=-1==b("mh")?h.attr("data-health"):+b("mh"),i=b("hbp")<1?100:+b("hbp"),n=-1==b("health")?c:+b("health"),h.attr("data-health",c),d=i/n*o;const u=$(".health__current"),r=$("#max_health"),f=$("#current_health");function v(){f.html(n),r.html(c)}function _(){u.attr("data-health",i),u.css("width",i+"%")}function C(){h.removeClass("defeat"),h.attr("data-health",Math.round(1.05*h.attr("data-health"))),c=h.attr("data-health"),A("mh",c),n=c,A("health",n),i=100,d=i/n*o,v(),_(),p++,l++,$("#kills").html(p),A("kills",p),$("#money").html(l),A("money",l)}let p,g;function k(){let e=+$("#total_damage").html();if(e>1e6){$("#total_damage").addClass("million");let t=e/1e6;$("#total_damage").html(Math.round(100*t)/100)}if(e>1e9){$("#total_damage").addClass("billion");let t=e/1e9;$("#total_damage").html(Math.round(100*t)/100)}if(e>1e12){$("#total_damage").addClass("trillion");let t=e/1e12;$("#total_damage").html(Math.round(100*t)/100)}}function b(e){e+="=";let t=document.cookie.indexOf(e);if(-1==t)return-1;t+=e.length;let a=document.cookie.indexOf(";",t);return-1==a&&(a=document.cookie.length),document.cookie.substring(t,a)}function A(e,t){document.cookie=`${e}=${t};max-age=48004800;`}h.addClass("active"),v(),_(),h.click((function(e){if(0!=f.html()){i-=d,i=Math.round(1e3*i)/1e3,i<0&&(i=0),A("hbp",i),n-=o,A("health",n),g+=+o,$("#total_damage").html(g),A("td",g),k(),_(),v(),$(".minus-hp").remove(),$(this).append(`<span class="minus-hp">-${o}</span>`);let t=e.offsetX,a=e.offsetY;$(".minus-hp").css({top:a,left:t})}f.html()<=0&&(h.addClass("defeat"),setTimeout(C,1e3),f.html(0))})),p=-1==b("kills")?0:+b("kills"),$("#kills").html(p),g=-1==b("td")?0:+b("td"),$("#total_damage").html(g),k(),$(".tab[data-link=null]").click((function(){$(".null-confirm").addClass("active"),$(".null-confirm__video").removeClass("hide"),$(".null-confirm__video")[0].play(),$(".null-confirm__sure").addClass("hide")})),$(".null-confirm__video").on("ended",(function(){$(this).addClass("hide"),$(".null-confirm__sure").removeClass("hide")})),$(".null-confirm__video")[0].volume=.4,$(".null-confirm__yes").click((function(){document.cookie="dpc=-1;max-age=-1;",document.cookie="money=-1;max-age=-1;",document.cookie="td=-1;max-age=-1;",document.cookie="kills=-1;max-age=-1;",document.cookie="hbp=-1;max-age=-1;",document.cookie="health=-1;max-age=-1;",document.cookie="mh=-1;max-age=-1;"})),$(".null-confirm__area, .null-confirm__no").click((function(){$(".null-confirm").removeClass("active"),$(".null-confirm__video")[0].pause()}))}));